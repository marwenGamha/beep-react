{"version":3,"sources":["views/Admin/Menu/index.js"],"names":["MenuPage","useState","setProfileImage","file","setFile","fileName","setFileName","isBtnDisabled","setIsBtnDisabled","setSocietyName","imageMenu","setImageMenu","useEffect","JSON","parse","localStorage","getItem","societyName","ImageMenu","e","a","preventDefault","formData","FormData","append","axios","url","method","data","headers","Authorization","then","res","success","target","reset","user","filename","setItem","stringify","catch","className","to","routes","adminHomePage","alt","src","htmlFor","onSubmit","id","type","name","accept","onChange","event","files","console","log","reader","FileReader","onloadend","result","readAsDataURL","onFileChange","required","onClick","window","alert","disabled"],"mappings":"0NAkJeA,UA3IE,WACf,MAAwCC,mBAAS,0BAAjD,mBAAqBC,GAArB,WACA,EAAwBD,mBAAS,MAAjC,mBAAOE,EAAP,KAAaC,EAAb,KACA,EAAgCH,mBAAS,IAAzC,mBAAOI,EAAP,KAAiBC,EAAjB,KACA,EAA0CL,oBAAS,GAAnD,mBAAOM,EAAP,KAAsBC,EAAtB,KAEA,EAAsCP,mBAAS,IAA/C,mBAAoBQ,GAApB,WACA,EAAkCR,mBAAS,IAA3C,mBAAOS,EAAP,KAAkBC,EAAlB,KAEAC,qBAAU,WACR,MAAmCC,KAAKC,MAAMC,aAAaC,QAAQ,SAA3DC,EAAR,EAAQA,YAAR,EAAqBC,UACrBT,EAAeQ,GACfN,EAAaD,EAAS,UAAMA,GAAc,wHACzC,IAbkB,4CAgDrB,WAA2BS,GAA3B,eAAAC,EAAA,6DACED,EAAEE,kBAEIC,EAAW,IAAIC,UACZC,OAAO,OAAQrB,GAJ1B,SAMQsB,IAAM,CACVC,IAAK,0BACLC,OAAQ,OACRC,KAAMN,EACNO,QAAS,CACPC,cAAc,cAAD,OAAgBf,aAAaC,QAAQ,UAClD,eAAgB,yBAGfe,MAAK,SAACC,GACL,IAAyB,IAArBA,EAAIJ,KAAKK,QAAkB,CAC7Bd,EAAEe,OAAOC,QACT,IAAIC,EAAOvB,KAAKC,MAAMC,aAAaC,QAAQ,SAC3CoB,EAAK1B,UAAYsB,EAAIJ,KAAKS,SAC1BtB,aAAauB,QAAQ,OAAQzB,KAAK0B,UAAUH,IAE5CzB,EAAa,GAAD,OAAIqB,EAAIJ,KAAKS,WAEzBjC,EAAQ,MACRE,GAAY,GACZJ,GAAgB,GAChBM,GAAiB,OAGpBgC,OAAM,SAACrB,OA9Bd,4CAhDqB,sBAiFrB,OACI,mCACE,qBAAKsB,UAAU,iBAAf,SACE,sBAAKA,UAAU,eAAf,UACE,eAAC,IAAD,CAAMA,UAAU,WAAWC,GAAIC,IAAOC,cAAtC,UACE,qBAAKC,IAAI,UAAUC,IAAI,2BACvB,6CAIF,qBAAKL,UAAU,kBAAf,SACE,sBAAKA,UAAU,UAAf,UAGE,qBAAKA,UAAU,8BAAf,4CAIA,sBAAKA,UAAU,mBAAf,UACE,uBAAOA,UAAU,cAAcM,QAAQ,SAAvC,SACE,8BACE,+BACG1C,GAAsB,wCAI7B,uBAAOoC,UAAU,aAAaM,QAAQ,SAAtC,sCAIF,uBAAMC,SA/GC,4CA+GP,UACE,uBACIP,UAAU,kBACVQ,GAAG,SACHC,KAAK,OACLC,KAAK,OACLC,OAAO,SACPC,SAAU,SAAClC,GAAD,OAjGT,SAACmC,GACpB,IAAInD,EAAOmD,EAAMpB,OAAOqB,MAAM,GAW9B,GATAC,QAAQC,IAAItD,GASRA,EAAM,CACR,IAAIuD,EAAS,IAAIC,WACjBD,EAAOE,UAAY,kBAAM1D,EAAgBwD,EAAOG,SAChDH,EAAOI,cAAc3D,GACrBG,EAAYgD,EAAMpB,OAAOqB,MAAM,GAAGJ,MAClC/C,EAAQkD,EAAMpB,OAAOqB,MAAM,IAC3B/C,GAAiB,QAGjBN,EAAgB,MAChBI,EAAY,MACZE,GAAiB,GA0EgBuD,CAAa5C,IAC9B6C,UAAQ,IAEZ,wBACId,KAAK,SACLT,UAAU,sBACVwB,QA5GS,WAC3BC,OAAOC,MAAO,+CA4GIC,SAAU7D,EAJd","file":"static/js/15.3ae0b50c.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport routes from \"../../../routes/restaurant\";\n\nimport \"./logo.css\";\n\nconst MenuPage = () => {\n  const [profileImage, setProfileImage] = useState(\"../../img/no_image.png\");\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState(\"\");\n  const [isBtnDisabled, setIsBtnDisabled] = useState(true);\n\n  const [societyName, setSocietyName] = useState(\"\");\n  const [imageMenu, setImageMenu] = useState(\"\");\n\n  useEffect(() => {\n    const { societyName, ImageMenu } = JSON.parse(localStorage.getItem(\"user\"));\n    setSocietyName(societyName);\n    setImageMenu(imageMenu ? `${imageMenu}` : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\");\n  }, []);\n\n\n  const onButtonClickHandler = () => {\n    window.alert( 'fichier téléchargé avec succès')\n  };\n\n\n  const onFileChange = (event) => {\n    var file = event.target.files[0];\n\n    console.log(file);\n\n    const MIME_TYPES = {\n      'image/jpg': 'jpg',\n      'image/jpeg': 'jpg',\n      'image/png': 'png',\n      'application/pdf' : 'pdf',\n    };\n\n    if (file) {\n      var reader = new FileReader();\n      reader.onloadend = () => setProfileImage(reader.result);\n      reader.readAsDataURL(file);\n      setFileName(event.target.files[0].name);\n      setFile(event.target.files[0]);\n      setIsBtnDisabled(false);\n    }\n    else{\n      setProfileImage(null);\n      setFileName(null);\n      setIsBtnDisabled(true);\n    }\n  };\n\n  async function uploadLogic(e) {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    await axios({\n      url: \"/api/restaurant/uploadM\",\n      method: \"POST\",\n      data: formData,\n      headers: {\n        Authorization: `auth-token:${localStorage.getItem(\"token\")}`,\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    })\n        .then((res) => {\n          if (res.data.success === true) {\n            e.target.reset();\n            let user = JSON.parse(localStorage.getItem(\"user\"));\n            user.imageMenu = res.data.filename;\n            localStorage.setItem(\"user\", JSON.stringify(user));\n\n            setImageMenu(`${res.data.filename}`);\n\n            setFile(null);\n            setFileName(false);\n            setProfileImage(false);\n            setIsBtnDisabled(true);\n          }\n        })\n        .catch((e) => {});\n  }\n\n  return (\n      <>\n        <div className=\"logo-container\">\n          <div className=\"logo-content\">\n            <Link className=\"btn-back\" to={routes.adminHomePage}>\n              <img alt=\"loading\" src=\"../../img/btn-back.png\" />\n              <span>Retour</span>\n            </Link>\n\n\n            <div className=\"container-right\">\n              <div className=\"account\">\n\n\n                <div className=\"logo-title logo-title-input\">\n                  Ajouter/Modifier l’image:\n                </div>\n\n                <div className=\"container-upload\">\n                  <label className=\"upload-text\" htmlFor=\"uplaod\">\n                    <div>\n                      <span>\n                        {fileName ? fileName : \"Aucun fichier sélectionné\"}\n                      </span>\n                    </div>\n                  </label>\n                  <label className=\"btn button\" htmlFor=\"uplaod\">\n                    Télécharger PDF\n                  </label>\n                </div>\n                <form onSubmit={uploadLogic}>\n                  <input\n                      className=\"logo-hide-input\"\n                      id=\"uplaod\"\n                      type=\"file\"\n                      name=\"file\"\n                      accept=\"file/*\"\n                      onChange={(e) => onFileChange(e)}\n                      required\n                  />\n                  <button\n                      type=\"submit\"\n                      className=\"btn btn-logo-submit\"\n                      onClick={onButtonClickHandler}\n                      disabled={isBtnDisabled}\n                  >\n                    Enregistrer\n                  </button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </>\n  );\n};\n\nexport default MenuPage;"],"sourceRoot":""}