(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{174:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var c=n(4),s=n.n(c),i=n(8),r=n(6),a=(n(174),n(0)),o=n(30),b=n.n(o),l=n(59),d=n(22),j=n(175),u=n(180),m=(n(179),n(2)),f=function(e){var t=e.beep,n=e.makeRequest,c=Object(a.useState)("red"),s=Object(r.a)(c,2),i=s[0],o=s[1],b=Object(a.useState)("white"),l=Object(r.a)(b,2),d=l[0],f=l[1];return Object(m.jsxs)("div",{className:"confirmed-beep",children:[Object(m.jsxs)("h1",{className:"confirmed-beep-number",children:["N\xb0",t.numero]}),Object(m.jsxs)("div",{className:"confirmed-beep-date",children:[Object(m.jsx)("p",{className:"confirmed-beep-date-content",children:"Note :"}),Object(m.jsx)("p",{className:"confirmed-beep-date-title",children:t.note?t.note:"pas de note"})]}),Object(m.jsxs)("button",{style:{background:i,color:d},className:"ml-auto confirmed-beep-call btn",onClick:function(){o("red"),f("white"),n(t._id,"call")},children:[Object(m.jsx)(j.a,{className:"confirmed-beep-call-icom",icon:u.a}),"Appeler"]}),!t.confirmed&&Object(m.jsx)("button",{onClick:function(){n(t._id,"confirm")},children:"Confirme"}),Object(m.jsx)("div",{id:"mdiv",className:"btn",onClick:function(){n(t._id,"delete")},children:Object(m.jsx)("div",{className:"mmdiv",children:Object(m.jsx)("div",{className:"mdiv",children:Object(m.jsx)("div",{className:"md"})})})})]})},O=n(45),h=(n(181),function(e){var t=e.showModals,n=e.setShowModal,c=e.makeRequest,s=e.beep,i=Object(a.useRef)(),o=Object(a.useState)(s.note),b=Object(r.a)(o,2),l=b[0],d=b[1];return Object(O.createPortal)(Object(m.jsx)(m.Fragment,{children:t?Object(m.jsx)("div",{className:"modal-backgound",onClick:function(e){i.current===e.target&&n(!1)},ref:i,children:Object(m.jsx)("div",{className:"modal-form-wrapper",showModals:t,children:Object(m.jsxs)("div",{className:"notconfirmed-beep-container",children:[Object(m.jsxs)("h1",{className:"notconfirmed-beep-number",children:["N\xb0",s.numero]}),Object(m.jsx)("button",{className:"notconfirmed-beep-confirm half-btn btn",onClick:function(){c(s._id,"confirm"),n(!1)},children:"Accepter"}),Object(m.jsx)("button",{className:"notconfirmed-beep-delete half-btn btn",onClick:function(){c(s._id,"delete"),n(!1)},children:"Supprimer"}),Object(m.jsx)("h6",{children:"Cr\xe9e une note: "}),Object(m.jsx)("input",{type:"textarea ",onChange:function(e){return d(e.target.value)},placeholder:"Note ici ..."}),Object(m.jsx)("button",{className:"notconfirmed-beep-confirm btn",onClick:function(){c(s._id,"add-note",l),n(!1)},children:"Enregistrer"})]})})}):null}),document.getElementById("modal"))}),p=(n(182),function(e){var t=e.beep,n=e.makeRequest,c=Object(a.useState)(!1),s=Object(r.a)(c,2),i=s[0],o=s[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h,{makeRequest:n,showModals:i,beep:t,setShowModal:o}),Object(m.jsx)("div",{className:"notconfirmed-beep",children:Object(m.jsxs)("div",{className:"notconfirmed-beep-container",children:[Object(m.jsxs)("h1",{className:"notconfirmed-beep-number",children:["N\xb0",t.numero]}),!t.confirmed&&Object(m.jsx)("button",{className:"notconfirmed-beep-confirm btn",onClick:function(){n(t._id,"confirm")},children:"Accepter"}),Object(m.jsx)("button",{className:"notconfirmed-beep-delete btn",onClick:function(){n(t._id,"delete")},children:"Refuser"}),Object(m.jsx)("button",{className:"notconfirmed-beep-note btn",onClick:function(){o(!i)},children:"Cr\xe9er note"})]})})]})}),x=n(44);t.default=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),j=Object(r.a)(o,2),u=j[0],O=j[1],h=Object(a.useState)(!0),v=Object(r.a)(h,2),N=v[0],k=v[1],g=Object(a.useState)(0),C=Object(r.a)(g,2),w=C[0],S=C[1],R=localStorage.getItem("token"),_=Object(a.useRef)();Object(a.useEffect)((function(){q(),_.current&&_.current.offAny(),_.current=b()("/"),_.current.on("snap",(function(e){e.change;q()})),_.current.on("error",(function(e){c((null===e||void 0===e?void 0:e.message)||"Error from server")}))}),[]);var q=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)(R).then((function(e){O(e),S(e.filter((function(e){return!e.confirmed})).length)})).catch((function(e){c(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n?_.current.emit(t,{beepId:e,token:R,note:n}):(console.log("test"),_.current.emit(t,{beepId:e,token:R}))};return Object(m.jsx)("div",{className:"restaurants-container",children:Object(m.jsx)("div",{className:"restaurants-content",children:Object(m.jsxs)("div",{className:"super-admin",children:[Object(m.jsx)("div",{className:"btn-back-container",children:Object(m.jsxs)(d.b,{className:"beep btn-back",to:x.a.superAdminHomePage,children:[Object(m.jsx)("img",{alt:"loading",src:"../../img/btn-back.png"}),Object(m.jsx)("span",{children:"Retour"})]})}),Object(m.jsx)("div",{className:"beeps-list-btn-items",children:Object(m.jsxs)("div",{className:"beeps-list "+(N?"active":"pending"),children:[Object(m.jsxs)("div",{className:"djdsfpds",children:[Object(m.jsx)("button",{className:"btn beep-btn beep-btn-m "+(N?"active":""),disabled:N,onClick:function(){return k(!0)},children:"En cours"}),Object(m.jsxs)("div",{className:"beeps-list-pending-btn-container",children:[w>0&&Object(m.jsx)("div",{className:"red-circle",children:w}),Object(m.jsx)("button",{className:"btn beep-btn "+(N?"":"active"),disabled:!N,onClick:function(){return k(!1)},children:"En attente"})]})]}),n&&Object(m.jsx)("div",{children:n}),!!u.length&&Object(m.jsx)("div",{className:"beeps-list-items",children:u.map((function(e){return e.confirmed===N&&(e.confirmed?Object(m.jsx)(f,{beep:e,makeRequest:E},e._id):Object(m.jsx)(p,{beep:e,makeRequest:E},e._id))}))})]})})]})})})}}}]);
//# sourceMappingURL=4.6298782b.chunk.js.map